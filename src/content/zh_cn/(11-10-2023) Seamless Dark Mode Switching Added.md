---
[category:UI & Customization]

###### [postdate]
# [postlink]新增无缝深色模式切换[/postlink]

{{#unless isPost}}
FastComments 一直以来都支持深色模式。然而，以前切换到深色模式需要重新加载评论小部件。这一问题已得到修复。
{{/unless}}

{{#isPost}}

### 新特性

FastComments 一直以来都支持深色模式。然而，以前切换到深色模式需要重新加载评论小部件。

这意味着如果一个网站使用深色模式，或者允许用户在浅色和深色模式之间切换，我们会
完全从浏览器中移除评论小部件并重新加载。这是出于技术原因在初始发布时简化产品，因为状态必须在父页面和小部件的 iframe 之间传递。

随着万圣节季节的结束——深色模式切换得到了改善。评论小部件现在支持浅色和深色模式之间的无缝过渡。然而，当适用时，仍然需要传递 `hasDarkBackground` 标志。

### 针对开发人员的提示及注意事项

为了告诉评论小部件您的网站处于深色模式—或应用了深色背景—您需要传递 `hasDarkBackground` 标志。这没有改变。然而，现在当您调用 `instance.update(newConfig)` （或在我们的库中例如 React、Svelte 等更改状态时），我们会检测唯一改变的参数是否是 `hasDarkBackground`，如果是，我们会优雅地更新评论小部件。小部件会在后台异步加载深色模式扩展，并在必要时更新其样式。

一个主要的注意事项是，当您传递 `newConfig` 时——这个必须是一个全新的对象，才能使此功能正常工作。

### 结论

和所有重大版本一样，我们很高兴能够抽出时间来优化、测试并正确发布这个功能。如果您发现任何问题，请在下面告诉我们。

干杯！

{{/isPost}}
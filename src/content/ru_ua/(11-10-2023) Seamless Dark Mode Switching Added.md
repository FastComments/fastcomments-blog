---
[category:UI & Customization]

###### [postdate]
# [postlink]Добавлено бесшовное переключение темной темы[/postlink]

{{#unless isPost}}
FastComments всегда поддерживал темную тему. Однако для переключения на темную тему ранее требовалась перезагрузка виджета комментариев. Это было исправлено.
{{/unless}}

{{#isPost}}

### Что нового

FastComments всегда поддерживал темную тему. Однако для переключения на темную тему ранее требовалась перезагрузка виджета комментариев.

Это означало, что если сайт использовал темную тему или позволял пользователям переключаться между светлой и темной темами, мы полностью удаляли виджет комментариев из браузера и перезагружали его. Это делалось по техническим причинам, чтобы упростить продукт при первом запуске, поскольку состояние должно было передаваться между родительской страницей и iframe виджета.

В свете окончания сезона Хэллоуина, переключение темной темы было улучшено. Теперь виджет комментариев поддерживает бесшовные переходы между светлой и темной темами. Однако по-прежнему требуется передавать флаг `hasDarkBackground`, когда это применимо.

### Для разработчиков и моменты, которые следует учитывать

Чтобы сообщить виджету комментариев, что ваш сайт находится в темной теме - или имеет примененный темный фон - вы должны передать флаг `hasDarkBackground`. Это не меняется. Однако теперь, когда вы вызываете `instance.update(newConfig)` (или изменяете состояние в одной из наших библиотек, таких как React, Svelte и т.д.), мы будем определять, изменился ли только параметр `hasDarkBackground`, и если да, корректно обновим виджет комментариев. Виджет асинхронно загрузит расширение темной темы в фоновом режиме и обновит его стили при необходимости.

Одним из основных моментов является то, что когда вы передаете `newConfig` - это должен быть совершенно новый объект, чтобы эта функция работала.

### В заключение

Как и при всех крупных релизах, мы рады, что смогли выделить время на оптимизацию, тестирование и правильный выпуск этой функции. Дайте нам знать ниже, если вы обнаружите какие-либо проблемы.

С наилучшими пожеланиями!

{{/isPost}}

---
---
[category:API & Development]

###### [postdate]
# [postlink]Изменения структуры вебхуков[/postlink]

{{#unless isPost}}
Мы внесли некоторые изменения, касающиеся поведения структур вебхуков.
{{/unless}}

{{#isPost}}

### Что нового

До 14 ноября 2023 года мы внесли следующие изменения в вебхуки:

#### Обновление вебхуков

**Ранее** обновления содержали последнюю версию комментария. Если два пользователя проголосовали за комментарий быстро друг за другом, это
вызывало два вебхука. Однако было возможно, что первое событие вебхука содержало **последнюю версию**, в результате чего возникали два
идентичных события вебхука:

1. ` ... { votes: 2 } ...`
2. ` ... { votes: 2 } ...`

**С 14 ноября** каждое событие вебхука является идемпотентным и содержит объект комментария на момент изменения. В приведенном выше примере вы теперь получите два события:

1. ` ... { votes: 1 } ...`
2. ` ... { votes: 2 } ...`

#### Удаление вебхуков

**Ранее** вебхуки удаления содержали только id комментария. Это был объект вида `{ id: string }`.

**С 14 ноября** вебхуки удаления будут содержать **весь** объект комментария на момент удаления.

### В заключение

Как и во всех крупных релизах, мы рады, что могли уделить время оптимизации, тестированию и должному выпуску этой функции. Дайте нам знать
ниже, если вы обнаружите какие-либо проблемы.

Ура!

{{/isPost}}

---
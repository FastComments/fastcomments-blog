---
[category:UI & Customization]

###### [postdate]
# [postlink]Додано безшовне перемикання на темний режим[/postlink]

{{#unless isPost}}
FastComments завжди підтримував темний режим. Однак, для переключення на темний режим раніше потрібно було перезавантажити віджет коментарів. Це було виправлено.
{{/unless}}

{{#isPost}}

### Що нового

FastComments завжди підтримував темний режим. Однак, для переключення на темний режим раніше потрібно було перезавантажити віджет коментарів.

Це означає, що якщо сайт використовував темний режим, або дозволяв користувачам перемикатися між світлим і темним режимами, ми б
повністю видаляли віджет коментарів з браузера і перезавантажували його. Це було зроблено з технічних причин для спрощення продукту
на початковому етапі запуску, оскільки стан має передаватися між батьківською сторінкою та iframe віджету.

З огляду на те, що жахливий сезон закінчився - перемикання на темний режим було вдосконалено. Віджет коментарів тепер підтримує безшовні переходи між світлим
і темним режимами. Однак, все ще потрібно передавати прапорець `hasDarkBackground`, коли це застосовно.

### Для розробників та підводні камені

Щоб повідомити віджет коментарів, що ваш сайт знаходиться в темному режимі - або має застосований темний фон - вам слід передати
прапорець `hasDarkBackground`. Це не змінюється. Однак, тепер, коли ви викликаєте `instance.update(newConfig)` (або змінюєте стан
в одній з наших бібліотек, таких як React, Svelte тощо), ми будемо виявляти, чи є єдиним зміненим параметром `hasDarkBackground`, і якщо так,
то акуратно оновимо віджет коментарів. Віджет асинхронно завантажить розширення темного режиму у фоновому режимі та оновить своє оформлення,
якщо це необхідно.

Одним з основних підводних каменів є те, що коли ви передаєте `newConfig` - це має бути абсолютно новий об'єкт, щоб ця функція працювала.

### На завершення

Як і з усіма основними релізами, ми раді, що змогли знайти час для оптимізації, тестування та коректного випуску цієї функції. Повідомте нам
нижче, якщо ви знайдете якісь проблеми.

На здоров'я!

{{/isPost}}

---
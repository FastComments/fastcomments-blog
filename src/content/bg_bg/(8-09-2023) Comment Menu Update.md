---
[category:API & Development]
###### [postdate]
# [postlink]Актуализация на менюто за коментари[/postlink]

{{#unless isPost}}
Тази актуализация е главно за разработчиците, които персонализират FastComments. Направихме някои промени в API и направихме оптимизации.
{{/unless}}

{{#isPost}}

### <i class="circle">!</i> Тази статия съдържа технически термини

### Какво е новото

Някои наематели на FastComments персонализират виджета за коментари. Това създава договор
между вашите персонализации и нашата имплементация. Ние даваме всичко от себе си, за да не нарушаваме този
договор, но като част от това съобщение имаме една малкаBreaking change.

### За разработчиците

CSS селекторът за менюто за коментари е променен.

Стар:

    .comment .menu .menu-content

Нов:

    .menu-content

### Съществуващи наематели

Ако вече използвате селектора "menu-content" - поздравления! Прегледахме всички наши
наематели, които използват този селектор и актуализирахме техните конфигурации на виджетите, за да предотвратим повреди.

Нека ни информирате, ако имате някакви проблеми.

### Причини

Откакто е създаден виджета за коментари, менюто за коментари беше изцяло ръководено от CSS. Това
е хубав прост, бърз начин за имплементиране на падащо меню, което също не изисква много код - дизайнерска
цел на FastComments.

Въпреки това, през годините то е натрупало проблеми.

Първо, когато областта за коментари има специфична височина и е скролируема, като при Streaming Chat,
достъпът до менюто в долната част е труден, тъй като менюто ще се опита да отиде отвъд
скролируемата съдържаща област. Това прави част от менюто невидимо и изисква да
преместите мишката си и отново да се насочите към менюто, за да свършите каквато работа току-що се опитвахте да свършите. Смятахме, че
това е досадно за използване.

Някои решения бяха направени, като обръщането на посоката на менюто **нагоре**,
но това също не работи, ако височината на виджета не е достатъчно голяма и в менюто има много действия
като за администратори. В този случай би било идеално да спуснете менюто
под скролируемата съдържаща област.

### Предимства на размера

Едно от предимствата на тази промяна е, че успяхме да абстрахираме много код в асинхронно зареждащ
модул. Това ще ни позволи да разширим действията, които можете да предприемете с данни за коментари, без да правим
първоначалното зареждане на виджета обемисто. Това въвежда мрежов повик при първото насочване
към менюто за редактиране, но началният пакет е много малък (< 1kb), така че това не би трябвало да е много забележимо.

Много е трудно да продължите да развивате софтуер и същевременно да намалявате размера му с времето. Обикновено софтуерът
започва бързо и става бавен. Затова винаги сме доволни да работим за запазването на FastComments бърз:

    Преди: 28.76kb gzipped (108.02kb общо)
    След: 28.39kb gzipped (105.79kb общо)

По-малко код също е по-малко код за вашия браузър, за да анализира при зареждане на страницата. Влиянието от това ще се увеличи, когато се добавят нови функции.

### Предимства за производителността

Старото меню извеждаше всички елементи на менюто, зареждаше всички разширения, за да види дали разширенията
имат елементи за добавяне и ги извеждаше - за всеки коментар - за да е готово съдържанието за вашата мишка.

Обикновено има само 30 - 100 обекта, така че това не е голям проблем, но влиянието растеше. Новата система премахва това безпокойство,
тъй като менюто сега се извежда само при поискване.

Неправилен компромис е, че новото меню е позиционирано и изведено с JS, за да постигнем желаното. Ще
продължим да го оптимизираме, колкото можем, но в момента работи добре.

### В заключение

Благодарим на нашите клиенти за търпението при внедряването на тези промени. Надяваме се да продължите да обичате FastComments.

Наздраве!

{{/isPost}}

---
---
[category:UI & Customization]

###### [postdate]
# [postlink]Добавено безпроблемно превключване на тъмен режим[/postlink]

{{#unless isPost}}
FastComments винаги е поддържал тъмен режим. Въпреки това, преди беше необходимо да се презареди коментаторският widget, за да се премине в тъмен режим. Това беше поправено.
{{/unless}}

{{#isPost}}

### Какво е новото

FastComments винаги е поддържал тъмен режим. Въпреки това, преди беше необходимо да се презареди коментаторският widget, за да се премине в тъмен режим.

Това означава, че ако сайтът използва тъмен режим или позволява на потребителите да превключват между светъл и тъмен режим, ние
изцяло премахвахме коментаторския widget от браузъра и го презареждахме. Това беше направено по технически причини, за да се опрости продукта
при първоначалното пускане, тъй като състоянието трябва да бъде комуникирано напред и назад между родителската страница и iframe на widget-а.

В светлината на приключването на сезона на страшните неща, превключването на тъмен режим беше подобрено. Коментаторският widget сега поддържа безпроблемни преходи между светлия
и тъмния режим. Все пак, все още е необходимо да се предаде флагът `hasDarkBackground`, когато е приложимо.

### За разработчици и подводни камъни

За да кажете на коментаторския widget, че вашият сайт е в тъмен режим - или има приложен тъмен фон - вие трябва да предадете флага
`hasDarkBackground`. Това не се променя. Въпреки това, сега, когато извикате `instance.update(newConfig)` (или промените състоянието
в някоя от нашите библиотеки, като React, Svelte и т.н.), ние ще открием дали единствено промененият параметър е `hasDarkBackground` и ако да,
нежно ще обновим коментаторския widget. Widget-ът асинхронно ще зареди разширението за тъмен режим на заден план и ако е необходимо, ще обнови стила си.

Един основен подводен камък е, че когато предавате `newConfig` - това трябва да бъде напълно нов обект, за да работи тази функция.

### В заключение

Както при всички основни версии, ние сме радостни, че успяхме да отделим време за оптимизиране, тестване и правилно публикуване на тази функция. Уведомете ни
по-долу, ако откриете някакви проблеми.

Наздраве!

{{/isPost}}

---
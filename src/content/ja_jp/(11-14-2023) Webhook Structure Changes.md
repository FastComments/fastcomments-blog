---
[category:API & Development]

###### [postdate]
# [postlink]Webhook 構造の変更[/postlink]

{{#unless isPost}}
Webhook 構造に関するいくつかの動作関連の変更を行いました。
{{/unless}}

{{#isPost}}

### 新機能

2023年11月14日以前に、Webhook に以下の変更を加えました。

#### 更新 Webhook

**以前は**、更新はコメントの最新バージョンを含んでいました。もし2人のユーザーが短時間にコメントに投票した場合、これにより2つのWebhook がトリガーされることがありました。しかし、最初のWebhook イベントが**最新バージョン**を含む可能性があったため、同一のWebhook イベントが2つ生成されることがありました。

1. ` ... { votes: 2 } ...`
2. ` ... { votes: 2 } ...`

**2023年11月14日以降**、各Webhook イベントは冪等性を持ち、変更時点のコメントオブジェクトを含むようになります。上記の例では、今後は2つのイベントが取得されます：

1. ` ... { votes: 1 } ...`
2. ` ... { votes: 2 } ...`

#### 削除 Webhook

**以前は**、削除Webhook はコメントIDのみを含んでいました。これは `{ id: string }` のようなオブジェクトでした。

**2023年11月14日以降**、削除Webhook には削除時点の**全体の**コメントオブジェクトが含まれます。

### 結論

すべての主要なリリースと同様に、この機能を最適化し、テストし、適切にリリースするための時間を取れたことを嬉しく思います。問題が発生した場合は、下記でお知らせください。

乾杯！

{{/isPost}}

---
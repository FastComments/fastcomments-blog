---
[category:UI & Customization]

###### [postdate]
# [postlink]シームレスなダークモードの切り替えが追加されました[/postlink]

{{#unless isPost}}
FastCommentsは常にダークモードをサポートしていました。しかし、ダークモードに切り替えるためにはコメントウィジェットの再読み込みが必要でした。これが修正されました。
{{/unless}}

{{#isPost}}

### 新機能

FastCommentsは常にダークモードをサポートしていました。しかし、ダークモードに切り替えるためにはコメントウィジェットの再読み込みが必要でした。

これは、サイトがダークモードを使用している場合や、ユーザーがライトモードとダークモードを行き来できる場合、ブラウザからコメントウィジェットを完全に削除し、再読み込みする必要があることを意味します。これは、親ページとウィジェットのiframe間で状態をやりとりする必要があるため、初回起動時に製品を簡素化するために技術的な理由で行われていました。

恐ろしい季節が終わったことを受けて、ダークモードの切り替えが改善されました。コメントウィジェットは今、ライトモードとダークモードの間でシームレスな遷移をサポートしています。しかし、適用可能な場合は`hasDarkBackground`フラグを渡す必要があります。

### 開発者向け & 注意点

コメントウィジェットに、サイトがダークモードであること、またはダーク背景が適用されていることを伝えるには、`hasDarkBackground`フラグを渡す必要があります。これは変わりません。しかし、`instance.update(newConfig)`（またはReact、Svelteなどのライブラリの状態を変更）を呼び出すと、変更されたパラメータが唯一`hasDarkBackground`であるかどうかを検出し、そうであればコメントウィジェットを優雅に更新します。ウィジェットはバックグラウンドでダークモード拡張を非同期でロードし、必要に応じてスタイリングを更新します。

1つの主要な注意点は、`newConfig`を渡す場合、これがこの機能が正常に動作するためのまったく新しいオブジェクトでなければならないことです。

### 結論

すべての主要なリリースと同様に、私たちはこの機能を最適化し、テストし、適切にリリースするために時間をかけられたことを嬉しく思います。問題を発見した場合は、下にお知らせください。

よろしくお願いします！

{{/isPost}}

---
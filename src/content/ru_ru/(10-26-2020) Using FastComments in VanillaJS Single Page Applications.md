---
[category:API & Development]
###### [postdate]
# [postlink]Использование FastComments в приложениях на VanillaJS с одностраничной архитектурой[/postlink]

{{#unless isPost}}
Хотя у нас есть специализированные компоненты для React и VueJS, стандартный виджет также можно использовать в одностраничных приложениях.
{{/unless}}

{{#isPost}}

### <i class="circle">!</i> В этой статье есть технические термины

#### Целевая аудитория

Эта статья предназначена для разработчиков.

#### Введение

Большинство примеров использования виджета FastComments на VanillaJS представляет собой очень простой код, который загружает поток комментариев для текущего URL страницы. Это связано с тем, что
это сценарий для подавляющего большинства наших клиентов, но недавно мы наблюдаем наплыв разработчиков, создающих SPA и использующих FastComments.

Прежде всего, имейте в виду, что FastComments имеет специализированные <a href="https://github.com/FastComments/fastcomments-react" target="_blank">React</a> и <a href="https://github.com/FastComments/fastcomments-vue" target="_blank">Vue</a> компоненты, так что ознакомьтесь с ними,
если вы используете эти библиотеки, чтобы вам не пришлось создавать собственный обертку вокруг FastComments.

Если вы строите свое приложение на VanillaJS, вы можете динамически создавать и обновлять виджет комментариев.

#### Первое, URL и URL ID

FastComments имеет два идентификатора для страницы или статьи, к которой привязан поток комментариев. В объекте конфигурации они являются свойствами "url" и "urlId".

URL - это URL к виджету комментариев. В идеале, вы должны иметь возможность посетить этот URL из вне вашего приложения. Он будет представлен в виде ссылки в уведомлениях по электронной почте и в
административных инструментах.

URL ID - это строка, которая либо является URL, либо ID - это может быть любое значение, пока оно представляет собой текущую страницу. Если у вас есть идентификатор поста, статьи или страницы, вы можете использовать его
вместо URL страницы для этого значения. Причина, по которой URL ID отдельно, заключается в том, что вы можете захотеть хранить дополнительную информацию в URL, которая сделает URL не уникальным для страницы.

Обратите внимание, что мы задокументировали полную конфигурацию, которую поддерживает виджет на TypeScript <a href="https://github.com/FastComments/fastcomments-typescript/blob/main/src/fastcomments-config.ts#L14" target="_blank">на GitHub</a>.

#### Специфика и реальная демонстрация

Когда виджет будет создан, захватите результат функции FastCommentsUI, которую вы обычно вызываете:

<div class="code">    const config = {tenantId: 'demo'};
    const widgetInstance = window.FastCommentsUI(document.getElementById('fastcomments-widget'), config);
</div>

Затем вы можете вызвать метод "update" на объекте экземпляра, чтобы обновить конфигурацию. Это обновит компонент:

<div class="code">    const config = {tenantId: 'demo'};
    const widgetInstance = window.FastCommentsUI(document.getElementById('fastcomments-widget'), config);
    widgetInstance.update({
        ...config,
        urlId: getUrlId(),
        url: getUrl()
    });
</div>

Вы можете увидеть работающий пример <a href="https://jsfiddle.net/winrid/y4wrs3h2/4/" target="_blank">в этом фиддле</a>.

Обратите внимание, что в этом примере мы используем document.getElementById, но вы можете использовать любой механизм, который вам нравится, чтобы получить целевой элемент.

#### Подводные камни

Хотя простое обновление "urlId" будет работать, вы должны обновить как "urlId", так и "url", даже если они одинаковы, чтобы ссылки из уведомлений по электронной почте и
инструментов модерации работали. Простое обновление "url" не сработает - комментарии привязаны к "urlId".

#### В заключение

Мы надеемся, что вы нашли это руководство полезным. Не стесняйтесь комментировать ниже с любыми вопросами.

С уважением!

{{/isPost}}

---
---
[category:UI & Customization]

###### [postdate]
# [postlink]Добавлено бесшовное переключение темного режима[/postlink]

{{#unless isPost}}
FastComments всегда поддерживал темный режим. Однако для его активации ранее требов.reload виджет комментариев. Это было исправлено.
{{/unless}}

{{#isPost}}

### Что нового

FastComments всегда поддерживал темный режим. Однако для его активации ранее требов.reload виджет комментариев.

Это означало, что если сайт использовал темный режим или позволял пользователям переключаться между светлым и темным режимами, мы полностью удаляли виджет комментариев из браузера и перезагружали его. Это делалось по техническим причинам для упрощения продукта на начальном этапе, так как состояние должно было передаваться между родительской страницей и iframe виджета.

После окончания сезона ужасов - переключение темного режима было улучшено. Виджет комментариев теперь поддерживает бесшовные переходы между светлым и темным режимами. Однако по-прежнему требуется передача флага `hasDarkBackground`, когда это применимо.

### Для разработчиков и особенности

Чтобы сообщить виджету комментариев, что ваш сайт находится в темном режиме - или имеет примененный темный фон - вам необходимо передать флаг `hasDarkBackground`. Это не изменилось. Однако теперь, когда вы вызываете `instance.update(newConfig)` (или изменяете состояние в одной из наших библиотек, таких как React, Svelte и т.д.), мы будем определять, если единственным измененным параметром является `hasDarkBackground`, и, если да, плавно обновим виджет комментариев. Виджет будет асинхронно загружать расширение темного режима в фоновом режиме и обновлять стили при необходимости.

Одной из главных особенностей является то, что когда вы передаете `newConfig` - это должен быть совершенно новый объект, чтобы эта функция работала.

### В заключение

Как и все основные релизы, мы рады, что смогли уделить время для оптимизации, тестирования и правильного выпуска этой функции. Дайте нам знать ниже, если вы обнаружите какие-либо проблемы.

Cheers!

{{/isPost}}

---